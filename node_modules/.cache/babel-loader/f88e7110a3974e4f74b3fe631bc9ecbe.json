{"ast":null,"code":"import _toConsumableArray from \"C:/PartTimeJob/blog/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.number.is-nan.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport \"core-js/modules/es.array.reduce.js\";\nimport \"core-js/modules/es.number.parse-float.js\";\nimport \"core-js/modules/es.number.to-fixed.js\";\nimport { defineComponent, h } from 'vue';\nimport '../../../../hooks/index.mjs';\nimport { hColgroup } from '../h-helper.mjs';\nimport useStyle from './style-helper.mjs';\nimport { useNamespace } from '../../../../hooks/use-namespace/index.mjs';\nvar TableFooter = defineComponent({\n  name: \"ElTableFooter\",\n  props: {\n    fixed: {\n      type: String,\n      \"default\": \"\"\n    },\n    store: {\n      required: true,\n      type: Object\n    },\n    summaryMethod: Function,\n    sumText: String,\n    border: Boolean,\n    defaultSort: {\n      type: Object,\n      \"default\": function _default() {\n        return {\n          prop: \"\",\n          order: \"\"\n        };\n      }\n    }\n  },\n  setup: function setup(props) {\n    var _useStyle = useStyle(props),\n        getCellClasses = _useStyle.getCellClasses,\n        getCellStyles = _useStyle.getCellStyles,\n        columns = _useStyle.columns;\n\n    var ns = useNamespace(\"table\");\n    return {\n      ns: ns,\n      getCellClasses: getCellClasses,\n      getCellStyles: getCellStyles,\n      columns: columns\n    };\n  },\n  render: function render() {\n    var columns = this.columns,\n        getCellStyles = this.getCellStyles,\n        getCellClasses = this.getCellClasses,\n        summaryMethod = this.summaryMethod,\n        sumText = this.sumText,\n        ns = this.ns;\n    var data = this.store.states.data.value;\n    var sums = [];\n\n    if (summaryMethod) {\n      sums = summaryMethod({\n        columns: columns,\n        data: data\n      });\n    } else {\n      columns.forEach(function (column, index) {\n        if (index === 0) {\n          sums[index] = sumText;\n          return;\n        }\n\n        var values = data.map(function (item) {\n          return Number(item[column.property]);\n        });\n        var precisions = [];\n        var notNumber = true;\n        values.forEach(function (value) {\n          if (!Number.isNaN(+value)) {\n            notNumber = false;\n            var decimal = \"\".concat(value).split(\".\")[1];\n            precisions.push(decimal ? decimal.length : 0);\n          }\n        });\n        var precision = Math.max.apply(null, precisions);\n\n        if (!notNumber) {\n          sums[index] = values.reduce(function (prev, curr) {\n            var value = Number(curr);\n\n            if (!Number.isNaN(+value)) {\n              return Number.parseFloat((prev + curr).toFixed(Math.min(precision, 20)));\n            } else {\n              return prev;\n            }\n          }, 0);\n        } else {\n          sums[index] = \"\";\n        }\n      });\n    }\n\n    return h(\"table\", {\n      \"class\": ns.e(\"footer\"),\n      cellspacing: \"0\",\n      cellpadding: \"0\",\n      border: \"0\"\n    }, [hColgroup({\n      columns: columns\n    }), h(\"tbody\", [h(\"tr\", {}, _toConsumableArray(columns.map(function (column, cellIndex) {\n      return h(\"td\", {\n        key: cellIndex,\n        colspan: column.colSpan,\n        rowspan: column.rowSpan,\n        \"class\": getCellClasses(columns, cellIndex),\n        style: getCellStyles(column, cellIndex)\n      }, [h(\"div\", {\n        \"class\": [\"cell\", column.labelClassName]\n      }, [sums[cellIndex]])]);\n    })))])]);\n  }\n});\nexport { TableFooter as default };","map":{"version":3,"mappings":"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","names":["defineComponent","name","props","fixed","type","String","store","required","Object","summaryMethod","Function","sumText","border","Boolean","defaultSort","prop","order","setup","useStyle","getCellClasses","getCellStyles","columns","ns","useNamespace","render","data","states","value","sums","forEach","column","index","values","map","item","Number","property","precisions","notNumber","isNaN","decimal","split","push","length","precision","Math","max","apply","reduce","prev","curr","parseFloat","toFixed","min","h","e","cellspacing","cellpadding","hColgroup","cellIndex","key","colspan","colSpan","rowspan","rowSpan","style","labelClassName"],"sources":["../../../../../../../packages/components/table/src/table-footer/index.ts"],"sourcesContent":["import { defineComponent, h } from 'vue'\nimport { useNamespace } from '@element-plus/hooks'\nimport { hColgroup } from '../h-helper'\nimport useStyle from './style-helper'\nimport type { Store } from '../store'\n\nimport type { PropType } from 'vue'\nimport type { DefaultRow, Sort, SummaryMethod } from '../table/defaults'\nexport interface TableFooter<T> {\n  fixed: string\n  store: Store<T>\n  summaryMethod: SummaryMethod<T>\n  sumText: string\n  border: boolean\n  defaultSort: Sort\n}\n\nexport default defineComponent({\n  name: 'ElTableFooter',\n\n  props: {\n    fixed: {\n      type: String,\n      default: '',\n    },\n    store: {\n      required: true,\n      type: Object as PropType<TableFooter<DefaultRow>['store']>,\n    },\n    summaryMethod: Function as PropType<\n      TableFooter<DefaultRow>['summaryMethod']\n    >,\n    sumText: String,\n    border: Boolean,\n    defaultSort: {\n      type: Object as PropType<TableFooter<DefaultRow>['defaultSort']>,\n      default: () => {\n        return {\n          prop: '',\n          order: '',\n        }\n      },\n    },\n  },\n  setup(props) {\n    const { getCellClasses, getCellStyles, columns } = useStyle(\n      props as TableFooter<DefaultRow>\n    )\n    const ns = useNamespace('table')\n    return {\n      ns,\n      getCellClasses,\n      getCellStyles,\n      columns,\n    }\n  },\n  render() {\n    const {\n      columns,\n      getCellStyles,\n      getCellClasses,\n      summaryMethod,\n      sumText,\n      ns,\n    } = this\n    const data = this.store.states.data.value\n    let sums = []\n    if (summaryMethod) {\n      sums = summaryMethod({\n        columns,\n        data,\n      })\n    } else {\n      columns.forEach((column, index) => {\n        if (index === 0) {\n          sums[index] = sumText\n          return\n        }\n        const values = data.map((item) => Number(item[column.property]))\n        const precisions = []\n        let notNumber = true\n        values.forEach((value) => {\n          if (!Number.isNaN(+value)) {\n            notNumber = false\n            const decimal = `${value}`.split('.')[1]\n            precisions.push(decimal ? decimal.length : 0)\n          }\n        })\n        const precision = Math.max.apply(null, precisions)\n        if (!notNumber) {\n          sums[index] = values.reduce((prev, curr) => {\n            const value = Number(curr)\n            if (!Number.isNaN(+value)) {\n              return Number.parseFloat(\n                (prev + curr).toFixed(Math.min(precision, 20))\n              )\n            } else {\n              return prev\n            }\n          }, 0)\n        } else {\n          sums[index] = ''\n        }\n      })\n    }\n    return h(\n      'table',\n      {\n        class: ns.e('footer'),\n        cellspacing: '0',\n        cellpadding: '0',\n        border: '0',\n      },\n      [\n        hColgroup({\n          columns,\n        }),\n        h('tbody', [\n          h('tr', {}, [\n            ...columns.map((column, cellIndex) =>\n              h(\n                'td',\n                {\n                  key: cellIndex,\n                  colspan: column.colSpan,\n                  rowspan: column.rowSpan,\n                  class: getCellClasses(columns, cellIndex),\n                  style: getCellStyles(column, cellIndex),\n                },\n                [\n                  h(\n                    'div',\n                    {\n                      class: ['cell', column.labelClassName],\n                    },\n                    [sums[cellIndex]]\n                  ),\n                ]\n              )\n            ),\n          ]),\n        ]),\n      ]\n    )\n  },\n})\n"]},"metadata":{},"sourceType":"module"}