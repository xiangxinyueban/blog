{"ast":null,"code":"import \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.index-of.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport '../../../constants/index.mjs';\nimport { UPDATE_MODEL_EVENT, CHANGE_EVENT } from '../../../constants/event.mjs';\n\nvar useMove = function useMove(props, checkedState, propsKey, emit) {\n  var _emit = function _emit(value, type, checked) {\n    emit(UPDATE_MODEL_EVENT, value);\n    emit(CHANGE_EVENT, value, type, checked);\n  };\n\n  var addToLeft = function addToLeft() {\n    var currentValue = props.modelValue.slice();\n    checkedState.rightChecked.forEach(function (item) {\n      var index = currentValue.indexOf(item);\n\n      if (index > -1) {\n        currentValue.splice(index, 1);\n      }\n    });\n\n    _emit(currentValue, \"left\", checkedState.rightChecked);\n  };\n\n  var addToRight = function addToRight() {\n    var currentValue = props.modelValue.slice();\n    var itemsToBeMoved = props.data.filter(function (item) {\n      var itemKey = item[propsKey.value];\n      return checkedState.leftChecked.includes(itemKey) && !props.modelValue.includes(itemKey);\n    }).map(function (item) {\n      return item[propsKey.value];\n    });\n    currentValue = props.targetOrder === \"unshift\" ? itemsToBeMoved.concat(currentValue) : currentValue.concat(itemsToBeMoved);\n\n    if (props.targetOrder === \"original\") {\n      currentValue = props.data.filter(function (item) {\n        return currentValue.includes(item[propsKey.value]);\n      }).map(function (item) {\n        return item[propsKey.value];\n      });\n    }\n\n    _emit(currentValue, \"right\", checkedState.leftChecked);\n  };\n\n  return {\n    addToLeft: addToLeft,\n    addToRight: addToRight\n  };\n};\n\nexport { useMove };","map":{"version":3,"mappings":";;;;;;;;;;;;;;AACY,IAACA,OAAO,GAAG,SAAVA,OAAU,CAACC,KAAD,EAAQC,YAAR,EAAsBC,QAAtB,EAAgCC,IAAhC,EAAyC;AAC9D,MAAMC,KAAK,GAAG,SAARA,KAAQ,CAACC,KAAD,EAAQC,IAAR,EAAcC,OAAd,EAA0B;AACtCJ,QAAI,CAACK,kBAAD,EAAqBH,KAArB,CAAJ;AACAF,QAAI,CAACM,YAAD,EAAeJ,KAAf,EAAsBC,IAAtB,EAA4BC,OAA5B,CAAJ;AACD,GAHD;;AAIA,MAAMG,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtB,QAAMC,YAAY,GAAGX,KAAK,CAACY,UAAN,CAAiBC,KAAjB,EAArB;AACAZ,gBAAY,CAACa,YAAb,CAA0BC,OAA1B,CAAkC,UAACC,IAAD,EAAU;AAC1C,UAAMC,KAAK,GAAGN,YAAY,CAACO,OAAb,CAAqBF,IAArB,CAAd;;AACA,UAAIC,KAAK,GAAG,CAAC,CAAb,EAAgB;AACdN,oBAAY,CAACQ,MAAb,CAAoBF,KAApB,EAA2B,CAA3B;AACD;AACF,KALD;;AAMAb,SAAK,CAACO,YAAD,EAAe,MAAf,EAAuBV,YAAY,CAACa,YAApC,CAAL;AACD,GATD;;AAUA,MAAMM,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvB,QAAIT,YAAY,GAAGX,KAAK,CAACY,UAAN,CAAiBC,KAAjB,EAAnB;AACA,QAAMQ,cAAc,GAAGrB,KAAK,CAACsB,IAAN,CAAWC,MAAX,CAAkB,UAACP,IAAD,EAAU;AACjD,UAAMQ,OAAO,GAAGR,IAAI,CAACd,QAAQ,CAACG,KAAV,CAApB;AACA,aAAOJ,YAAY,CAACwB,WAAb,CAAyBC,QAAzB,CAAkCF,OAAlC,KAA8C,CAACxB,KAAK,CAACY,UAAN,CAAiBc,QAAjB,CAA0BF,OAA1B,CAAtD;AACD,KAHsB,EAGpBG,GAHoB,CAGhB,UAACX,IAAD;AAAA,aAAUA,IAAI,CAACd,QAAQ,CAACG,KAAV,CAAd;AAAA,KAHgB,CAAvB;AAIAM,gBAAY,GAAGX,KAAK,CAAC4B,WAAN,KAAsB,SAAtB,GAAkCP,cAAc,CAACQ,MAAf,CAAsBlB,YAAtB,CAAlC,GAAwEA,YAAY,CAACkB,MAAb,CAAoBR,cAApB,CAAvF;;AACA,QAAIrB,KAAK,CAAC4B,WAAN,KAAsB,UAA1B,EAAsC;AACpCjB,kBAAY,GAAGX,KAAK,CAACsB,IAAN,CAAWC,MAAX,CAAkB,UAACP,IAAD;AAAA,eAAUL,YAAY,CAACe,QAAb,CAAsBV,IAAI,CAACd,QAAQ,CAACG,KAAV,CAA1B,CAAV;AAAA,OAAlB,EAAyEsB,GAAzE,CAA6E,UAACX,IAAD;AAAA,eAAUA,IAAI,CAACd,QAAQ,CAACG,KAAV,CAAd;AAAA,OAA7E,CAAf;AACD;;AACDD,SAAK,CAACO,YAAD,EAAe,OAAf,EAAwBV,YAAY,CAACwB,WAArC,CAAL;AACD,GAXD;;AAYA,SAAO;AACLf,aAAS,EAATA,SADK;AAELU,cAAU,EAAVA;AAFK,GAAP;AAIF,CA/BY","names":["useMove","props","checkedState","propsKey","emit","_emit","value","type","checked","UPDATE_MODEL_EVENT","CHANGE_EVENT","addToLeft","currentValue","modelValue","slice","rightChecked","forEach","item","index","indexOf","splice","addToRight","itemsToBeMoved","data","filter","itemKey","leftChecked","includes","map","targetOrder","concat"],"sources":["../../../../../../packages/components/transfer/src/useMove.ts"],"sourcesContent":["import { CHANGE_EVENT, UPDATE_MODEL_EVENT } from '@element-plus/constants'\n\nimport type { ComputedRef } from 'vue'\nimport type {\n  DataItem,\n  Key,\n  TransferCheckedState,\n  TransferProps,\n} from './transfer'\n\nexport const useMove = (\n  props: TransferProps,\n  checkedState: TransferCheckedState,\n  propsKey: ComputedRef<string>,\n  emit\n) => {\n  const _emit = (value, type: 'left' | 'right', checked: Key[]) => {\n    emit(UPDATE_MODEL_EVENT, value)\n    emit(CHANGE_EVENT, value, type, checked)\n  }\n\n  const addToLeft = () => {\n    const currentValue = props.modelValue.slice()\n\n    checkedState.rightChecked.forEach((item) => {\n      const index = currentValue.indexOf(item)\n      if (index > -1) {\n        currentValue.splice(index, 1)\n      }\n    })\n    _emit(currentValue, 'left', checkedState.rightChecked)\n  }\n\n  const addToRight = () => {\n    let currentValue = props.modelValue.slice()\n\n    const itemsToBeMoved = props.data\n      .filter((item: DataItem) => {\n        const itemKey = item[propsKey.value]\n        return (\n          checkedState.leftChecked.includes(itemKey) &&\n          !props.modelValue.includes(itemKey)\n        )\n      })\n      .map((item) => item[propsKey.value])\n\n    currentValue =\n      props.targetOrder === 'unshift'\n        ? itemsToBeMoved.concat(currentValue)\n        : currentValue.concat(itemsToBeMoved)\n\n    if (props.targetOrder === 'original') {\n      currentValue = props.data\n        .filter((item) => currentValue.includes(item[propsKey.value]))\n        .map((item) => item[propsKey.value])\n    }\n\n    _emit(currentValue, 'right', checkedState.leftChecked)\n  }\n\n  return {\n    addToLeft,\n    addToRight,\n  }\n}\n"]},"metadata":{},"sourceType":"module"}