{"ast":null,"code":"import { watch } from 'vue';\nimport { useEventListener } from '@vueuse/core';\n\nvar usePreventGlobal = function usePreventGlobal(indicator, evt, cb) {\n  var prevent = function prevent(e) {\n    if (cb(e)) e.stopImmediatePropagation();\n  };\n\n  var stop = void 0;\n  watch(function () {\n    return indicator.value;\n  }, function (val) {\n    if (val) {\n      stop = useEventListener(document, evt, prevent, true);\n    } else {\n      stop == null ? void 0 : stop();\n    }\n  }, {\n    immediate: true\n  });\n};\n\nexport { usePreventGlobal };","map":{"version":3,"mappings":";;;AAEY,IAACA,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,SAAD,EAAYC,GAAZ,EAAiBC,EAAjB,EAAwB;AACtD,MAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,CAAD,EAAO;AACrB,QAAIF,EAAE,CAACE,CAAD,CAAN,EACEA,CAAC,CAACC,wBAAF;AACH,GAHD;;AAIA,MAAIC,IAAI,GAAG,KAAK,CAAhB;AACAC,OAAK,CAAC;AAAA,WAAMP,SAAS,CAACQ,KAAhB;AAAA,GAAD,EAAwB,UAACC,GAAD,EAAS;AACpC,QAAIA,GAAJ,EAAS;AACPH,UAAI,GAAGI,gBAAgB,CAACC,QAAD,EAAWV,GAAX,EAAgBE,OAAhB,EAAyB,IAAzB,CAAvB;AACD,KAFD,MAEO;AACLG,UAAI,IAAI,IAAR,GAAe,KAAK,CAApB,GAAwBA,IAAI,EAA5B;AACD;AACF,GANI,EAMF;AAAEM,aAAS,EAAE;AAAb,GANE,CAAL;AAOF,CAbY","names":["usePreventGlobal","indicator","evt","cb","prevent","e","stopImmediatePropagation","stop","watch","value","val","useEventListener","document","immediate"],"sources":["../../../../../packages/hooks/use-prevent-global/index.ts"],"sourcesContent":["import { watch } from 'vue'\nimport { useEventListener } from '@vueuse/core'\nimport type { Ref } from 'vue'\n\nexport const usePreventGlobal = <E extends keyof DocumentEventMap>(\n  indicator: Ref<boolean>,\n  evt: E,\n  cb: (e: DocumentEventMap[E]) => boolean\n) => {\n  const prevent = (e: DocumentEventMap[E]) => {\n    if (cb(e)) e.stopImmediatePropagation()\n  }\n  let stop: (() => void) | undefined = undefined\n  watch(\n    () => indicator.value,\n    (val) => {\n      if (val) {\n        stop = useEventListener(document, evt, prevent, true)\n      } else {\n        stop?.()\n      }\n    },\n    { immediate: true }\n  )\n}\n"]},"metadata":{},"sourceType":"module"}