{"ast":null,"code":"import _createForOfIteratorHelper from \"C:/PartTimeJob/blog/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport '../../../constants/index.mjs';\nimport { EVENT_CODE } from '../../../constants/aria.mjs';\nvar MAP_KEY_TO_FOCUS_INTENT = {\n  ArrowLeft: \"prev\",\n  ArrowUp: \"prev\",\n  ArrowRight: \"next\",\n  ArrowDown: \"next\",\n  PageUp: \"first\",\n  Home: \"first\",\n  PageDown: \"last\",\n  End: \"last\"\n};\n\nvar getDirectionAwareKey = function getDirectionAwareKey(key, dir) {\n  if (dir !== \"rtl\") return key;\n\n  switch (key) {\n    case EVENT_CODE.right:\n      return EVENT_CODE.left;\n\n    case EVENT_CODE.left:\n      return EVENT_CODE.right;\n\n    default:\n      return key;\n  }\n};\n\nvar getFocusIntent = function getFocusIntent(event, orientation, dir) {\n  var key = getDirectionAwareKey(event.key, dir);\n  if (orientation === \"vertical\" && [EVENT_CODE.left, EVENT_CODE.right].includes(key)) return void 0;\n  if (orientation === \"horizontal\" && [EVENT_CODE.up, EVENT_CODE.down].includes(key)) return void 0;\n  return MAP_KEY_TO_FOCUS_INTENT[key];\n};\n\nvar reorderArray = function reorderArray(array, atIdx) {\n  return array.map(function (_, idx) {\n    return array[(idx + atIdx) % array.length];\n  });\n};\n\nvar focusFirst = function focusFirst(elements) {\n  var _document = document,\n      prevActive = _document.activeElement;\n\n  var _iterator = _createForOfIteratorHelper(elements),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var element = _step.value;\n      if (element === prevActive) return;\n      element.focus();\n      if (prevActive !== document.activeElement) return;\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n};\n\nexport { focusFirst, getFocusIntent, reorderArray };","map":{"version":3,"mappings":";;;;;;AACA,IAAMA,uBAAuB,GAAG;AAC9BC,WAAS,EAAE,MADmB;AAE9BC,SAAO,EAAE,MAFqB;AAG9BC,YAAU,EAAE,MAHkB;AAI9BC,WAAS,EAAE,MAJmB;AAK9BC,QAAM,EAAE,OALsB;AAM9BC,MAAI,EAAE,OANwB;AAO9BC,UAAQ,EAAE,MAPoB;AAQ9BC,KAAG,EAAE;AARyB,CAAhC;;AAUA,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACC,GAAD,EAAMC,GAAN,EAAc;AACzC,MAAIA,GAAG,KAAK,KAAZ,EACE,OAAOD,GAAP;;AACF,UAAQA,GAAR;AACE,SAAKE,UAAU,CAACC,KAAhB;AACE,aAAOD,UAAU,CAACE,IAAlB;;AACF,SAAKF,UAAU,CAACE,IAAhB;AACE,aAAOF,UAAU,CAACC,KAAlB;;AACF;AACE,aAAOH,GAAP;AANJ;AAQD,CAXD;;AAYY,IAACK,cAAc,GAAG,SAAjBA,cAAiB,CAACC,KAAD,EAAQC,WAAR,EAAqBN,GAArB,EAA6B;AACzD,MAAMD,GAAG,GAAGD,oBAAoB,CAACO,KAAK,CAACN,GAAP,EAAYC,GAAZ,CAAhC;AACA,MAAIM,WAAW,KAAK,UAAhB,IAA8B,CAACL,UAAU,CAACE,IAAZ,EAAkBF,UAAU,CAACC,KAA7B,EAAoCK,QAApC,CAA6CR,GAA7C,CAAlC,EACE,OAAO,KAAK,CAAZ;AACF,MAAIO,WAAW,KAAK,YAAhB,IAAgC,CAACL,UAAU,CAACO,EAAZ,EAAgBP,UAAU,CAACQ,IAA3B,EAAiCF,QAAjC,CAA0CR,GAA1C,CAApC,EACE,OAAO,KAAK,CAAZ;AACF,SAAOV,uBAAuB,CAACU,GAAD,CAA9B;AACF,CAPY;;AAQA,IAACW,YAAY,GAAG,SAAfA,YAAe,CAACC,KAAD,EAAQC,KAAR,EAAkB;AAC5C,SAAOD,KAAK,CAACE,GAAN,CAAU,UAACC,CAAD,EAAIC,GAAJ;AAAA,WAAYJ,KAAK,CAAC,CAACI,GAAG,GAAGH,KAAP,IAAgBD,KAAK,CAACK,MAAvB,CAAjB;AAAA,GAAV,CAAP;AACF,CAFY;;AAGA,IAACC,UAAU,GAAG,SAAbA,UAAa,CAACC,QAAD,EAAc;AACtC,kBAAsCC,QAAtC;AAAA,MAAuBC,UAAvB,aAAQC,aAAR;;AADsC,6CAEhBH,QAFgB;AAAA;;AAAA;AAEtC,wDAAgC;AAAA,UAArBI,OAAqB;AAC9B,UAAIA,OAAO,KAAKF,UAAhB,EACE;AACFE,aAAO,CAACC,KAAR;AACA,UAAIH,UAAU,KAAKD,QAAQ,CAACE,aAA5B,EACE;AACH;AARqC;AAAA;AAAA;AAAA;AAAA;AASxC,CATY","names":["MAP_KEY_TO_FOCUS_INTENT","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","PageUp","Home","PageDown","End","getDirectionAwareKey","key","dir","EVENT_CODE","right","left","getFocusIntent","event","orientation","includes","up","down","reorderArray","array","atIdx","map","_","idx","length","focusFirst","elements","document","prevActive","activeElement","element","focus"],"sources":["../../../../../../packages/components/roving-focus-group/src/utils.ts"],"sourcesContent":["import { EVENT_CODE } from '@element-plus/constants'\nimport type { HTMLAttributes } from 'vue'\n\ntype Orientation = HTMLAttributes['aria-orientation']\ntype Direction = 'ltr' | 'rtl'\ntype FocusIntent = 'first' | 'last' | 'prev' | 'next'\n\nconst MAP_KEY_TO_FOCUS_INTENT: Record<string, FocusIntent> = {\n  ArrowLeft: 'prev',\n  ArrowUp: 'prev',\n  ArrowRight: 'next',\n  ArrowDown: 'next',\n  PageUp: 'first',\n  Home: 'first',\n  PageDown: 'last',\n  End: 'last',\n}\n\nconst getDirectionAwareKey = (key: string, dir?: Direction) => {\n  if (dir !== 'rtl') return key\n\n  switch (key) {\n    case EVENT_CODE.right:\n      return EVENT_CODE.left\n    case EVENT_CODE.left:\n      return EVENT_CODE.right\n    default:\n      return key\n  }\n}\n\nexport const getFocusIntent = (\n  event: KeyboardEvent,\n  orientation?: Orientation,\n  dir?: Direction\n) => {\n  const key = getDirectionAwareKey(event.key, dir)\n  if (\n    orientation === 'vertical' &&\n    [EVENT_CODE.left, EVENT_CODE.right].includes(key)\n  )\n    return undefined\n  if (\n    orientation === 'horizontal' &&\n    [EVENT_CODE.up, EVENT_CODE.down].includes(key)\n  )\n    return undefined\n  return MAP_KEY_TO_FOCUS_INTENT[key]\n}\n\nexport const reorderArray = <T>(array: T[], atIdx: number) => {\n  return array.map((_, idx) => array[(idx + atIdx) % array.length])\n}\n\nexport const focusFirst = (elements: HTMLElement[]) => {\n  const { activeElement: prevActive } = document\n\n  for (const element of elements) {\n    if (element === prevActive) return\n    element.focus()\n    if (prevActive !== document.activeElement) return\n  }\n}\n"]},"metadata":{},"sourceType":"module"}